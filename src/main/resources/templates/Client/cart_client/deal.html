<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/Client/index::dynamic(~{::main})}">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.8.3.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../../static/Client/css/cart_user.css">
    <link rel="stylesheet" href="../../../static/Client/css/_index.css">
    <link rel="stylesheet" href="../../../static/Client/css/product.css">
    <script th:src="@{/Client/Js/cart.js}"></script>
    <script src="../../../static/Client/Js/cart/cart.js"></script>
</head>

<body>
    <main ng-app="order_app" ng-controller="order_ctrl" style="clear: both;">

        <div style="width:93%; margin: auto; background-color: #C93F04; margin-top: 150px; ">

            <div style="width: 70%; height: auto; float: left; margin-bottom: 150px;">
   
                 <div ng-repeat="l in shopItem" class="mt-4 border-sec"
                    style="width: 100%; background-color: rgb(255, 255, 255);  border-radius: 10px; clear: both;">
                    <div class="my-2 pt-5" style="width: 90%; margin: auto;">
                        <div class="float-start">
                            <a href="#" style="text-decoration: none; color: #080808;"><span><i style="font-size: 30px;"
                                        class="bi bi-person-circle mx-3"></i></span>
                                <span style="font-size: 22px;">{{l.shopname}}</span></a>
                        </div>
                        <div style="float: right;" class="mt-2">
                            <p>x<strong>{{shopItem.length}}</strong></p>
                        </div>
                        <hr style="clear: both;">
                        <table class="table-hover" style="background: none;">
                            <thead  >
                                <tr>
                                    <th  style="width: 10%;"></th>
                                    <th style="width: 30%;color: rgb(59, 131, 155);">Product</th>
                                    <th style="color: rgb(59, 131, 155);text-align: center;">Price</th>
                                    <th style="width: 10%;color: rgb(59, 131, 155);">Quantity</th>
                                    <th style="width: 27%;color: green; text-align: right;">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="d in dealItem" ng-if="d.books.shoponlines.shopid == l.shopid">
                                    <td>
                                        <div>
                                            <img id="img{{d.books.bookid}}" style="width: 70%;"  ng-src="" alt=""
                                                ng-init="setImage(d.books.bookid)">
                                        </div>
                                    </td>
                                    <td><a>{{d.books.bookname}}</a></td>
                                    <td style="text-align: center;">{{d.books.price}}</td>
                                    <td style="text-align: center;"> {{d.quantity}}</td>
                                    <td ng-class="total{{l.shopid}}" style="font-weight: 700;text-align: right; ">{{d.books.price * d.quantity }}</td>
                                </tr>
                            </tbody>
                        </table>
                        <hr style="clear: both; border: 1px solid #666;">

                        <div class="float-end m-3"  ng-repeat ="s in salesItem">
                            <p style="font-size: 22px;" ng-if="s.sales.shopid == l.shopid" >Giảm : <strong id = "sale{{l.shopid}}" style="color: #C93F04;">{{s.sales.discountpercentage *100}} %</strong></p>
                        </div>
                        <div class="float-end m-3" ng-repeat ="s in salesItem" >
                            <p style="font-size: 20px ;" ng-if="s.sales.shopid == l.shopid">Voucher : <strong id = "coup{{l.shopid}}" class="btn btn-primary">{{s.sales.couoponcode}}</strong></p>
                        </div>
                        <div class="d-flex justify-content-around mt-2" style="clear: both;">
                            <div style="width: 40%;">
                                <select class="form-select float-start h-100">
                                    <option value="0">Chọn đơn vị vận chuyển</option>
                                    <option th:each="u : ${shippingunit}" th:value="${u.shippingunitid}" th:text="${u.name}"></option>
                                </select>
                            </div>

                            <div class=""> <textarea class="float-end form-control" name="" id="" cols="60" rows="2"
                                    placeholder="Ghi chú..."></textarea>
                            </div>
                        </div>
                        <hr style="clear: both; border: 1px solid #666;">
                        <div class="float-end mx-3" style="clear: both;">
                            <p style="font-size: 24px;"><strong>Thành tiền</strong> : <strong id = "priceItem{{l.shopid}}" onclick="clicks(id)"  style="color: #C93F04;">600 000.00</strong></p>
                        </div>
                       

                    </div >
                  <div style="clear: both;"></div>
                </div> 
              
            </div>
            <div style="width: 27%; height: auto; margin-top: 50px;float: right; margin-bottom: 150px;">
                <aside style="width: 100%;">
                    <div style="width: 100%; margin: auto;  border-radius: 5px;" class="border-sec">
                        <div style="width: 90%; margin: auto;">
                            <div>
                                <h4 class="orange-text my-3">THÔNG TIN</h4>
                            </div>
                            <div>
                                <hr>
                                <h5 class="mt-3">Shipping address</h5>
                                <select class="form-select">
                                    <option th:each="a : ${addressusser}" th:value="${a.addressuserid}" th:text="${a.address}"></option>
                                </select>
                                <h5 class="mt-3">Payment</h5>
                                <select class="form-select">
                                    <option>Chọn phương thức thanh toán</option>
                                    <option value="">Thanh toán sau khi nhận được hàng</option>
                                    <option value="">Thanh toán bằng tài khoản ngân hàng</option>
                                </select>
                                <h5 class="mt-3">Voucher</h5>
                                <select class="form-select" id = "voucherOther">
                                    <option value="0">Chọn mã giảm giá đơn hàng</option>
                                    <option th:each="c : ${discountcode}" th:value="${c.sales.couoponcode}" th:text="${c.sales.promotionname}"></option>
                                </select>
                                <h5 class="mt-3">Free Shipping</h5>
                                <select class="form-select">
                                    <option>Chọn mã giảm vận chuyển</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                </select>
                                <hr>
                            </div>
                        </div>

                    </div>

                    <div style="width: 100%; margin: auto;  border-radius: 5px;" class="border-orange mt-2">
                        <div style="width: 90%; margin: auto;">
                            <div>
                                <h4 class="orange-text my-3">CHI PHÍ TỔNG</h4>
                            </div>
                            <div>
                                <hr>
                                <div style="clear: both;">
                                    <div class="float-start me-5" style="width: 45%;">
                                        <p>Số lượng :</p>
                                    </div>
                                    <div class="float-start"><strong style="text-align: left;" id="totalQuantity">{{totalQuantity}}</strong></div>
                                </div>
                                <div style="clear: both;">
                                    <div class="float-start me-5" style="width: 45%;">
                                        <p>Tổng tiền :</p>
                                    </div>
                                    <div class="float-start"><strong style="text-align: left;"  id="totalPriceAll">1 000 000.00</strong>
                                    </div>
                                </div>
                                <div style="clear: both;">
                                    <div class="float-start me-5" style="width: 45%;">
                                        <p>Phí Ship :</p>
                                    </div>
                                    <div class="float-start"><strong style="text-align: left;">60 000.00</strong></div>
                                </div>
                                <div style="clear: both;">
                                    <div class="float-start me-5" style="width: 45%;">
                                        <p>Voucher</p>
                                    </div>
                                    <div class="float-start"><strong style="text-align: left;" id="totalSales">0.00</strong>
                                    </div>
                                </div>
                                <div style="clear: both;">
                                    <div class="float-start me-5" style="width: 45%;">
                                        <p>Freeship:</p>
                                    </div>
                                    <div class="float-start"><strong style="text-align: left;" id="totalFreeShip" > -15 000.00</strong>
                                    </div>
                                </div>
                                <hr style="clear: both;">
                                <div style="clear: both;">
                                    <div class="float-start me-5" style="width: 45%;">
                                        <p style="font-weight: 500;">Thanh toán:</p>
                                    </div>
                                    <div class="float-start orange-text"><strong style="text-align: left;" id="totalFinal">1 000
                                            015.00</strong>
                                    </div>
                                </div>
                                <hr style="clear: both;">
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 mx-3">
                        <button class="btn btn-danger">Huỷ</button>
                        <button class="btn btn-success float-end">Đặt hàng</button>
                    </div>
                </aside>
            </div>

        </div>
        <script th:src="@{/Client/Js/cart/cart.js}"></script>
        <script src="../../../static/Client/Js/cart/cart.js"></script>
        <script type="text/javascript" src="//code.jquery.com/jquery-1.8.3.js"></script>
    </main>
</body>

</html>